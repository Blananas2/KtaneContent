<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>

    <title>SOLUTION — School Days</title><meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="../css/puzzles.css">
    <link rel="stylesheet" type="text/css" href="../../HTML/css/font.css">
    <link rel="stylesheet" type="text/css" href="elias-puzzles.css">
    <style>
        table.grid {
            border: .06cm solid black;
            float: left;
            margin: 0 1cm .5cm 0;
        }

            table.grid td.big {
                font-size: 20pt;
            }

            table.grid tr {
                height: 1.6cm;
            }

            table.grid td {
                width: 1.5cm;
                border: .03cm solid black;
                padding: 0;
                text-align: center;
                vertical-align: middle;
            }

            table.grid td.change { background: #fee; }
            table.grid td.binary0 { font-weight: bold; }
            table.grid td.binary1 { background: #000; color: white; font-weight: bold; font-size: 32pt; }

        p.cur-step {
            border: 1px solid #4f4;
            background: #efe;
            margin: .5cm 1cm;
            min-height: 2cm;
            position: relative;
        }
            #cur-step {
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                width: 16cm;
            }
        button {
            min-height: 2cm;
        }

        p.clue { display: none; }
        p.clue.highlighted { display: block; }
        p.clue.solution.highlighted { display: inline-block; width: 6cm; }
    </style></head>
<body>
    <div id="everything" class='solution'>
        <div class="page">
            <h1>School Days<span class="number"> — 7.7</span></h1>
            <h2>Solution</h2>
            <p style='text-align: center'>Use the left/right arrow buttons to navigate the solution steps.</p>
            <button id='prev' disabled style='float: left'>◀</button><button id='next' style='float:right'>▶</button><p style='text-align: center' class='cur-step'><span id='cur-step'></span></p>
            <table class="grid">
                <tr><td class="big"></td><td class="big">M</td><td class="big">T</td><td class="big">W</td><td class="big">T</td><td class="big">F</td></tr>
                <tr><td class="big">8</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 3</td></tr>
                <tr><td class="big">9</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 21</td></tr>
                <tr><td class="big">10</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 18</td></tr>
                <tr><td class="big">11</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 19</td></tr>
                <tr><td class="big">12</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 5</td></tr>
                <tr><td class="big">1</td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='sol'></td><td class='decimal'>= 19</td></tr>
            </table>
            <p class='clue'>1. Each class meets three times a week. Each of these meetings is on a different day.</p>
            <p class='clue'>2. The Literature class meets the same time all three days. No other class meets the same time on any two days.</p>
            <p class='clue'>3. Toshi is in class during lunch hour (noon) only on Wednesdays and Fridays.</p>
            <p class='clue'>4. Toshi always goes immediately to his Calculus classes from his Astronomy classes.</p>
            <p class='clue'>5. Toshi is a heavy sleeper, so he has 8 o’clock open Mondays–Wednesday.</p>
            <p class='clue'>6. Toshi gets mentally exhausted on Mondays, going to his Physics class immediately after his Calculus class.</p>
            <p class='clue'>7. Toshi has one day of the schedule completely clear.</p>
            <p class='clue'>8. Toshi has Geography at 8 on Thursday; his first of four classes that day. Like all times he has Geography, he has an open period immediately after.</p>
            <p class='clue'>9. Tuesday and Wednesday, Toshi has work from 10–12, and can’t be in class during those times.</p>
            <p class='clue'>10. Either Toshi has Geography at 12 Wednesday, or Literature at 12 Friday, but not both.</p>
            <p class='clue'>11. Monday is the only day Toshi has Physics but not Geography.</p>
            <p class='clue'>12. Friday has a break at 10 to rest, but that is the only time slot without a class.</p>
            <p class='clue solution'>CURSES</p>
            <script>
                var steps = [
                    { 'board': '---G    -  -- - --  -- -      ', 'clues': '--h-h--hh--h-', 'explain': 'Clues 3, 5, 8, 9 and 12 directly state some information to start.' },
                    { 'board': '---G A  - C-- -P--  -- -      ', 'clues': '---h-h-------', 'explain': 'Clues 4 and 6 together imply that Monday has three classes in a row.' },
                    { 'board': '---G A  - C-- -P--  --G-   -  ', 'clues': '-h-----h-h---', 'explain': 'Clue 10 implies Geography at 12 Wednesday, because Literature is ruled out by Clue 2. Clue 8 then implies there’s an open period immediately after.' },
                    { 'board': '---G A- - C-- -P--  --G-  --  ', 'clues': '------h----h-', 'explain': 'The “completely clear” day alluded to by Clue 7 must be Tuesday because the other days have classes (including Friday according to Clue 12).' },
                    { 'board': '---G A- - C-- -P--  --G- L--LL', 'clues': '-h-----------', 'explain': 'This leaves only 1 o’clock as the time slot for the Literature classes referred to by Clue 2.' },
                    { 'board': '---G A- -GC-- -P--  --G- L--LL', 'clues': 'h------h---h-', 'explain': 'The third Geography class must be on Friday (Clue 1). Clue 8 says it must be followed by an open period and Clue 12 says that 10 o’clock is the only open period on that day, so it must be at 9.' },
                    { 'board': '---G A- -GC--A-P--CA--G-CL--LL', 'clues': 'h--h---------', 'explain': 'Since every Astronomy class is followed by a Calculus class (Clue 4), there is only one way to fit these all in now.' },
                    { 'board': '---GPA-P-GC--A-P--CA--G-CL--LL', 'clues': 'h------------', 'explain': 'That leaves only two slots for the remaining two Physics classes (Clue 1). Turns out we didn’t need Clue 11!' },
                    { 'board': '000111010110010100110010110011', 'clues': '------------h', 'explain': 'Each row can now be read as a binary number and converted from A1Z26, giving the solution.' },
                ];
                var curStep = 0;
                var tds = Array.from(document.getElementsByClassName('sol'));
                var cluePs = Array.from(document.querySelectorAll('p.clue'));
                var conv = { 'L': 'Lit', 'G': 'Geo', 'A': 'Astro', 'C': 'Calc', 'P': 'Phys' };
                function update()
                {
                    document.getElementById('cur-step').innerText = steps[curStep].explain;
                    for (let i = 0; i < 30; i++) {
                        var ch = steps[curStep].board.substr(i, 1);
                        tds[i].innerText = conv[ch] || ch;
                        tds[i].classList.remove('change');
                        tds[i].classList.remove('binary0');
                        tds[i].classList.remove('binary1');
                        if (ch === '0')
                            tds[i].classList.add('binary0');
                        else if (ch === '1')
                            tds[i].classList.add('binary1');
                        else if ((curStep === 0) ? (ch !== ' ') : (ch !== steps[curStep-1].board.substr(i, 1)))
                            tds[i].classList.add('change');
                    }
                    for (let j = 0; j < 13; j++) {
                        var ch = steps[curStep].clues.substr(j, 1);
                        if (ch === 'h')
                            cluePs[j].classList.add('highlighted');
                        else
                            cluePs[j].classList.remove('highlighted');
                    }
                    document.getElementById('prev').disabled = curStep === 0;
                    document.getElementById('next').disabled = curStep === steps.length-1;
                    Array.from(document.querySelectorAll('td.decimal')).forEach(td => { td.style.display = (curStep === steps.length-1) ? 'table-cell' : 'none'; });
                }
                update();
                document.getElementById('prev').onclick = function() { if (curStep > 0             ) { curStep--; update(); } };
                document.getElementById('next').onclick = function() { if (curStep < steps.length-1) { curStep++; update(); } };
            </script>
        </div>
    </div>
</body></html>