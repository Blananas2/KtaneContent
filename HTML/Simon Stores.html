<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Simon Stores — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <script src="js/ktane-utils.js"></script>
</head>
<body>
    <div id="ManualContent">
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Simon Stores</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Simon Stores.svg" class="diagram">
                    <h2>On the Subject of Simon Stores</h2>
                    <p class="flavour-text">Calculators at the ready...</p>

                    <p>This module consists of nine buttons, six of which have the colours: (R)ed, (G)reen, (B)lue, (C)yan, (M)agenta, and (Y)ellow.</p>
					<p>These buttons will flash in an increasing sequence, starting with the centre button, in which each flashing colour corresponds to an operator in the tables below.</p>
					<p>Apply each operation successively until the end of the sequence and use the result to determine the sequence of coloured buttons to press for each stage.</p>
					<ul><small><strong>If at any point an operator yields-
					    <li>a value greater than 364, then subtract 365 from the value until it is less than 364.</li>
					    <li>a value less than -364, then add 365 to the value until it is greater than -364.</li>
					</strong></small></ul>

                    <h3>Section 1: Determining Initial Values</h3>
					<p>To determine the number to be entered into the sequence of operators, interpret the following pairs of digits in the serial number as base36 numbers modulo 365<br>
					(the example SN = ‘BO1MB2’ is used to illustrate how this is done):</p>
					<ul><small>
					    <li> For stage 1, use the 3rd and 4th digits.    (a<sub>0</sub> = ‘1M’ = (1 * 36 + 22) mod 365 = 58 mod 365 = 58)</li>
						<li> For stage 2, use the 5th and 6th digits.    (b<sub>0</sub> = ‘B2’ = (11 * 36 + 2) mod 365 = 398 mod 365 = 33)</li>
						<li> For stage 3, use the 1st and 2nd digits.    (c<sub>0</sub> = ‘BO’ = (11 * 36 + 24) mod 365 = 420 mod 365 = 55)</li>
				    </small></ul>
					
					<h3>Section 2: Operation Tables</h3>
					<p>Use the tables below to calculate each successive value of the sequence.</p>
					<ul><small>
					    <li>n is the current step of the sequence.</li>
                        <li>D is the sum of the base36 digits of the serial number.    (‘BO1MB2’ = 11 + 24 + 1 + 22 + 11 + 2 = 69)</li>	
                    </small></ul>
                    <h4>Table SS1: Single Colour Flashes</h4>
                    <table>
					
					<tr>
					<th></th>
					<th>Stage 1</th>
					<th>Stage 2</th>
					<th>Stage 3</th>
					</tr>
					
					<tr>
					<th>R</th>
					<td>a<sub>n</sub> = a<sub>n-1</sub> + D</td>
					<td>b<sub>n</sub> = b<sub>n-1</sub> + a<sub>n-1</sub> + n<sup>2</sup></td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> + b<sub>n-1</sub> - a<sub>n-1</sub></td>
					</tr>
					
					<tr>
					<th>G</th>
					<td>a<sub>n</sub> = a<sub>n-1</sub> - D</td>
					<td>b<sub>n</sub> = 2b<sub>n-1</sub> - a<sub>n-1</sub></td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> - 2b<sub>n-1</sub></td>
					</tr>
					
                    <tr>
					<th>B</th>
					<td>a<sub>n</sub> = 2a<sub>n-1</sub> - D</td>
					<td>b<sub>n</sub> = 2b<sub>n-1</sub> - a<sub>0</sub> - 4n<sup>2</sup></td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> + b<sub>0</sub> - a<sub>3</sub></td>
					</tr>
					
					<tr>
					<th>C</th>
					<td>a<sub>n</sub> = D - a<sub>n-1</sub> - 8n</td>
					<td>b<sub>n</sub> = b<sub>n-1</sub> + a<sub>1</sub></td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> - b<sub>n-1</sub> + a<sub>n-1</sub></td>
					</tr>
					
				    <tr>
					<th>M</th>
					<td>a<sub>n</sub> = 3n<sup>3</sup> - 2a<sub>n-1</sub></td>
					<td>b<sub>n</sub> = b<sub>n-1</sub> + a<sub>2</sub> - D</td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> - 2a<sub>n-1</sub></td>
					</tr>
					
					<tr>
					<th>Y</th>
					<td>a<sub>n</sub> = a<sub>n-1</sub> + D - 6n</td>
					<td>b<sub>n</sub> = b<sub>n-1</sub> + a<sub>3</sub> - a<sub>n-1</sub></td>
					<td>c<sub>n</sub> = c<sub>n-1</sub> + b<sub>4</sub> - a<sub>0</sub></td>
					</tr>
					</table>
					
                </div>
                <div class="page-footer relative-footer">Page 1 of 4</div>
            </div>
            <div class="page page-bg-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Simon Stores</span>
                </div>
                <div class="page-content">
                    <h4>Table SS2: Double Colour Flashes</h4>
					<p>The operators here depend on whether the flashing colours are (P)rimary or (S)econdary with respect to additive colour mixing.</p>
                    <table>
                        <tr>
                            <th></th>
                            <th>Stage 1</th>
							<th>Stage 2</th>
							<th>Stage 3</th>
                        </tr>
						<tr>
                            <th>2P</th>
                            <td><small>a<sub>n</sub> = <br>max(P<sub>1</sub>(a<sub>n-1</sub>), P<sub>2</sub>(a<sub>n-1</sub>))</small></td>
							<td><small>b<sub>n</sub> = <br>abs(P<sub>1</sub>(b<sub>n-1</sub>) - P<sub>2</sub>(b<sub>n-1</sub>))</small></td>
							<td><small>c<sub>n</sub> = <br>P<sub>3</sub>(c<sub>n-1</sub>) + P<sub>3</sub>(b<sub>n-1</sub>) + P<sub>3</sub>(a<sub>n-1</sub>)</small></td>
                        </tr>
						
					    <tr>
                            <th>1P, 1S</th>
                            <td><small>a<sub>n</sub> = <br>P(a<sub>n-1</sub>) + S(a<sub>n-1</sub>) - 2D</small></td>
							<td><small>b<sub>n</sub> = <br>4D - abs(P(b<sub>n-1</sub>) - S(b<sub>n-1</sub>))</small></td>
							<td><small>c<sub>n</sub> = <br>min(P(c<sub>n-1</sub>), S(c<sub>n-1</sub>) , -abs(P(c<sub>n-1</sub>) - S(c<sub>n-1</sub>)))</small></td>
                        </tr>
						
						<tr>
                            <th>2S</th>
                            <td><small>a<sub>n</sub> = <br>min(S<sub>1</sub>(a<sub>n-1</sub>), S<sub>2</sub>(a<sub>n-1</sub>))</small></td>
							<td><small>b<sub>n</sub> = <br>max(S<sub>3</sub>(b<sub>n-1</sub>), S<sub>3</sub>(a<sub>n-1</sub>))</small></td>
							<td><small>c<sub>n</sub> = <br>S<sub>3</sub>(c<sub>n-1</sub>) - S<sub>1</sub>(c<sub>n-1</sub>) - S<sub>2</sub>(c<sub>n-1</sub>)</small></td>
                        </tr>
                    
					</table>
					<p>P<sub>3</sub> and S<sub>3</sub> refer to the operators that correspond to the respective primary and secondary colours that <strong>did not</strong> flash at this step of the sequence.</p>

                    <h4>Table SS3: Triple Colour Flashes</h4>
					<table>
					    <tr>
                            <th></th>
                            <th>Stage 1</th>
							<th>Stage 2</th>
							<th>Stage 3</th>
                        </tr>
						<tr>
                            <th>3P</th>
                            <td><small>a<sub>n</sub> = <br>a<sub>n-1</sub> + a<sub>0</sub></small></td>
							<td><small>b<sub>n</sub> = <br>b<sub>n-1</sub> + (b<sub>n-1</sub> mod 4)b<sub>0</sub> - a<sub>3</sub></small></td>
							<td><small>c<sub>n</sub> = <br>c<sub>n-1</sub> + (c<sub>n-1</sub> mod 3)c<sub>0</sub> - <br>(b<sub>n-1</sub> mod 3)b<sub>0</sub> + (a<sub>n-1</sub> mod 3)a<sub>0</sub></td>
                        </tr>
						<tr>
                            <th>2P, 1S</th>
                            <td><small>a<sub>n</sub> = <br>max(P<sub>1</sub>(a<sub>n-1</sub>),P<sub>2</sub>(a<sub>n-1</sub>), S(a<sub>n-1</sub>))</small></td>
							<td><small>b<sub>n</sub> = <br>b<sub>n-1</sub> +  P<sub>1</sub>(b<sub>n-1</sub>) + <br>P<sub>2</sub>(b<sub>n-1</sub>) - S(a<sub>n-1</sub>)</small></td>
							<td><small>c<sub>n</sub> = <br>P<sub>1</sub>(c<sub>n-1</sub>) + P<sub>2</sub>(c<sub>n-1</sub>) - S(b<sub>n-1</sub>) - S(a<sub>n-1</sub>)</small></td>
                        </tr>
						<tr>
                            <th>1P, 2S</th>
                            <td><small>a<sub>n</sub> = <br>min(P<sub>1</sub>(a<sub>n-1</sub>),P<sub>2</sub>(a<sub>n-1</sub>), S(a<sub>n-1</sub>))</small></td>
							<td><small>b<sub>n</sub> = <br>b<sub>n-1</sub> +  S<sub>1</sub>(a<sub>n-1</sub>) + <br>S<sub>2</sub>(a<sub>n-1</sub>) - P(b<sub>n-1</sub>)</small></td>
							<td><small>c<sub>n</sub> = <br>S<sub>1</sub>(c<sub>n-1</sub>) + S<sub>2</sub>(c<sub>n-1</sub>) - P(b<sub>n-1</sub>) - P(a<sub>n-1</sub>)</small></td>
                        </tr>
						<tr>
                            <th>3S</th>
                            <td><small>a<sub>n</sub> = <br>a<sub>n-1</sub> - a<sub>0</sub></small></td>
							<td><small>b<sub>n</sub> = <br>b<sub>n-1</sub> + (b<sub>0</sub> mod 4)b<sub>n-1</sub> - a<sub>3</sub></small></td>
							<td><small>c<sub>n</sub> = <br>c<sub>n-1</sub> + (c<sub>0</sub> mod 3)c<sub>n-1</sub> - <br>(b<sub>0</sub> mod 3)b<sub>n-1</sub> + (a<sub>0</sub> mod 3)a<sub>n-1</sub></td>
                        </tr>
					</table>
					<p>Note: a<sub>4</sub> is equal to zero.</p>
                </div>
                <div class="page-footer relative-footer">Page 2 of 4</div>
            </div>
            <div class="page page-bg-03">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Simon Stores</span>
                </div>
                <div class="page-content">
                   <h3>Section 3: Converting Results</h3>
				   <p>Once a result of the sequence of operations has been obtained, it must be converted into <strong>balanced ternary</strong>.</p>
				   <p>Balanced ternary is a base 3 number system in which the digits have the values<br>1, 0, and -1.</p>
				   <p>For example: 250 = 243 + 9 - 3 + 1 = 3<sup>5</sup> + 3<sup>2</sup> - 3<sup>1</sup> + 3<sup>0</sup> = +00+-+</p>
				   <p><small>The balanced ternary representations of integers from -10 to 10 are shown below.</small></p>
				   <small><table>
				   <tr><td><small>-10</small></td><td><small>-9</small></td><td><small>-8</small></td><td><small>-7</small></td><td><small>-6</small></td>
				   <td><small>-5</small></td><td><small>-4</small></td><td><small>-3</small></td><td><small>-2</small></td><td><small>-1</small></td><td><small>0</small></td>
				   <td><small>1</small></td><td><small>2</small></td><td><small>3</small></td><td><small>4</small></td><td><small>5</small>
				   </td><td><small>6</small></td><td><small>7</small></td><td><small>8</small></td><td><small>9</small></td><td><small>10</small></td></tr>
				   <tr><td><small>-0-</small></td><td><small>-00</small></td><td><small>-0+</small></td><td><small>-+-</small></td><td><small>-+0</small></td>
				   <td><small>-++</small></td><td><small>--</small></td><td><small>-0</small></td><td><small>-+</small></td><td><small>-</small></td><td><small>0</small></td>
				   <td><small>+</small></td><td><small>+-</small></td><td><small>+0</small></td><td><small>++</small></td><td><small>+--</small>
				   </td><td><small>+-0</small></td><td><small>+-+</small></td><td><small>+0-</small></td><td><small>+00</small></td><td><small>+0+</small></td></tr>
				   </table></small>
				   <h3>Section 4: Entry and Submission</h3>
				   <p>To work out which buttons need to be pressed, first apply the list of conditions on the positions of buttons on the module to each row of the initial correspondences table, starting from the top of the list and working down.</p>
				   <table>
				       <tr><th>Initial Correspondences</th><th>3<sup>0</sup></th><th>3<sup>1</sup></th><th>3<sup>2</sup></th><th>3<sup>3</sup></th><th>3<sup>4</sup></th><th>3<sup>5</sup></th></tr>
					   <tr><th>Stage 1</th><td>R</td><td>G</td><td>B</td><td>C</td><td>M</td><td>Y</td></tr>
					   <tr><th>Stage 2</th><td>Y</td><td>B</td><td>G</td><td>M</td><td>C</td><td>R</td></tr>
					   <tr><th>Stage 3</th><td>B</td><td>M</td><td>R</td><td>Y</td><td>G</td><td>C</td></tr>
				   </table>
				   <p></p>
				   <small><table>
				        <tr><td>If...</td><td>...,then...</td></tr>
						<tr><td>the top right button is yellow</td><td>cycle each element one space to the right.<br>(1-&gt;2, 2-&gt;3,...,6-&gt;1)</td></tr>
						<tr><td>the red button is opposite the cyan button</td><td>swap each element with its complementary colour.<br>(R&lt;-&gt;C, G&lt;-&gt;M, B&lt;-&gt;Y)</td></tr>
						<tr><td>the green button is adjacent to the white button</td><td>cycle the primary colour elements.<br>(R-&gt;G, G-&gt;B, B-&gt;R)</td></tr>
						<tr><td>the magenta button is adjacent to the black button</td><td>cycle the secondary colour elements.<br>(C-&gt;M, M-&gt;Y, Y-&gt;C)</td></tr>
						<tr><td>the blue and yellow buttons are on the same side of the module</td><td>swap B with the element opposite.<br>(1&lt;-&gt;6, 2&lt;-&gt;5, 3&lt;-&gt;4)</td></tr>
						<tr><td>the red button is on the right side of the module</td><td>swap R and Y.</td></tr>
						<tr><td>the blue button is on the left side of the module</td><td>swap G and C.</td></tr>
				   </table></small>
                </div>
                <div class="page-footer relative-footer">Page 3 of 4</div>
            </div>
			<div class="page page-bg-04">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Simon Stores</span>
                </div>
                <div class="page-content">
				Once a balanced ternary number and the buttons corresponding to powers of 3 for the current stage have both been determined, follow the instructions below:
				<ol><li>Press the centre button. This will cause the sequence to stop flashing and light the white button.</li>
					<li>Using the coloured buttons, enter the non-zero balanced ternary digits in order of <strong>least to most significance</strong>:
					<ul>
					    <li>Pressing the white and black buttons will toggle which of the two are lit.</li>
					    <li>Pressing a coloured button while the white button is lit will enter a ‘+’ in the corresponding digit.</li>
						<li>Pressing a coloured button while the black button is lit will enter a ‘-’ in the corresponding digit.</li>
				    </ul>
					<li>Press the centre button again to submit the sequence of inputs.</li>
				</ol>
				<p>Submitting the correct sequence of inputs will advance the module to the next stage.</p>
				<p>Submitting an incorrect balanced ternary number, or submitting the coloured buttons in the wrong order will result in a strike.</p>
				</div>
				<div class="page-footer relative-footer">Page 4 of 4</div>
		    </div>
        </div>
    </div>
</body>
</html>